import { useState, useEffect, useRef } from "react";
import css from "./Benefits.module.css";
import svg_ok from "../../assets/ok.svg";

const benefits = [
  {
    title: "Максимально висока ціна",
    describe:
      "Ми прагнемо запропонувати вам максимально вигідну ціну за ваш автомобіль, адже наша мета — забезпечити найкращі умови для клієнтів. Наша бізнес-модель базується на великій кількості викуплених авто, що дозволяє нам пропонувати конкурентоспроможні ціни без шкоди для якості обслуговування",
  },
  {
    title: "Викуп авто будь-яких марок",
    describe:
      "Наша компанія спеціалізується на викупі автомобілів усіх можливих марок і моделей, незалежно від їхнього походження чи року випуску. Ми готові розглянути будь-який транспортний засіб, щоб ви могли швидко та зручно продати своє авто без зайвих турбот",
  },
  {
    title: "Повний розрахунок готівкою",
    describe:
      "Ми гарантуємо, що ви отримаєте повну суму за ваш автомобіль готівкою прямо в день звернення. Жодних затримок чи розстрочок — усі фінансові операції проводяться швидко, зручно та прозоро",
  },
  {
    title: "Швидке оформлення",
    describe:
      "Процес оформлення всіх необхідних документів для викупу вашого автомобіля займає трохи більше однієї години. Ми цінуємо ваш час і робимо все можливе, щоб процедура була максимально швидкою та ефективною",
  },
  {
    title: "Юридична прозорість",
    describe:
      "Ми забезпечуємо повну юридичну чистоту угоди, що дозволяє вам уникнути будь-яких ризиків втрати коштів чи шахрайства. Наші фахівці ретельно перевіряють усі документи, щоб гарантувати вашу безпеку",
  },
  {
    title: "Виїзд експерта до клієнта",
    describe:
      "Вам не доведеться витрачати час на поїздки — наш експерт приїде до вас у зручне місце та час. Ми пропонуємо максимальну зручність, щоб процес оцінки та викупу авто був комфортним для вас",
  },
  {
    title: "Викуп день у день",
    describe:
      "Ми гарантуємо, що ви отримаєте гроші за свій автомобіль у день звернення до нас. Наша оперативність дозволяє завершити угоду швидко, щоб ви могли одразу розпоряджатися отриманими коштами",
  },
  {
    title: "Швидка оцінка авто",
    describe:
      "Вам не потрібно відвідувати СТО чи проводити додаткові перевірки — ми оцінимо ваш автомобіль прямо на місці абсолютно безкоштовно. Наші експерти швидко та професійно визначать стан вашого авто",
  },
  {
    title: "Викуп авто в будь-якому стані",
    describe:
      "Ми готові викупити ваш автомобіль незалежно від його технічного стану, зовнішнього вигляду чи рівня зношеності. Навіть якщо ваше авто потребує ремонту, ми запропонуємо вам вигідну ціну",
  },
  {
    title: "Безкоштовна консультація",
    describe:
      "Наші кваліфіковані фахівці надають безкоштовні професійні консультації щодо вартості вашого автомобіля та умов викупу. Ми завжди готові відповісти на всі ваші запитання, щоб ви почувалися впевнено",
  },
  {
    title: "Економія вашого часу",
    describe:
      "Ми беремо на себе всі клопоти, пов’язані з продажем автомобіля, щоб ви могли зосередитися на своїх особистих справах. Наша команда зробить процес максимально швидким і безтурботним для вас",
  },
  {
    title: "Прозора оцінка вартості",
    describe:
      "Наші експерти надають детальне пояснення, як саме формується ціна вашого автомобіля, враховуючи його стан, ринкові тенденції та інші фактори. Ми гарантуємо чесність і прозорість на кожному етапі",
  },
  {
    title: "Відсутність прихованих платежів",
    describe:
      "Ви не сплачуєте жодних додаткових комісій чи зборів за наші послуги — усі витрати ми беремо на себе. Це дозволяє вам отримати максимальну вигоду від продажу вашого автомобіля",
  },
  {
    title: "Викуп авто після ДТП",
    describe:
      "Ми готові викупити ваш автомобіль навіть після серйозних аварій чи значних пошкоджень. Незалежно від стану, ми запропонуємо справедливу ціну та візьмемо на себе всі турботи",
  },
  {
    title: "Цілодобова підтримка",
    describe:
      "Наша команда працює цілодобово, щоб ви могли отримати консультацію чи організувати викуп у будь-який зручний для вас час. Ми завжди на зв’язку, щоб допомогти вам із будь-якими питаннями",
  },
  {
    title: "Гнучкий графік роботи",
    describe:
      "Ми адаптуємося до вашого розкладу, працюючи у зручний для вас час, включаючи вихідні та святкові дні. Ви можете обрати будь-який момент для оцінки чи викупу вашого автомобіля",
  },
  {
    title: "Допомога з переоформленням",
    describe:
      "Ми беремо на себе всі формальності, пов’язані з переоформленням документів у державних органах, щоб ви не витрачали свій час і зусилля. Усе буде зроблено швидко, професійно та без зайвих клопотів",
  },
];

const getRandomBenefits = () => {
  return [...benefits].sort(() => Math.random() - 0.5).slice(0, 4);
};

export default function Benefits() {
  const [currentBenefits, setCurrentBenefits] = useState(getRandomBenefits);
  const [isFadingOut, setIsFadingOut] = useState(false);
  const intervalRef = useRef<number | null>(null);

  useEffect(() => {
    intervalRef.current = window.setInterval(() => {
      // Зберігаємо відстань від низу сторінки
      // const distanceFromBottom =
      //   document.documentElement.scrollHeight - (window.scrollY + window.innerHeight);

      // Спочатку запускаємо зникнення
      setIsFadingOut(true);

      // Замінюємо бенефіти після завершення анімації зникнення
      setTimeout(() => {
        setCurrentBenefits(getRandomBenefits());
        // Вимикаємо анімацію зникнення, щоб нові бенефіти з’явилися
        setIsFadingOut(false);

        // Відновлюємо позицію прокрутки, зберігаючи відстань від низу
        // const newScrollHeight = document.documentElement.scrollHeight;
        // const newScrollY = newScrollHeight - (window.innerHeight + distanceFromBottom);
        // window.scrollTo(0, newScrollY);
      }, 333); // Час має відповідати тривалості CSS-анімації
    }, 10000); // Інтервал між повними циклами

    return () => {
      if (intervalRef.current !== null) {
        window.clearInterval(intervalRef.current);
      }
    };
  }, []);

  return (
    <section role="benefits" className={css.benefits}>
      <h1 className={css.benefits_title}>ЧОМУ ПОНАД 1000+ КЛІЄНТІВ ВИБРАЛИ AUTOTRADEKH ?</h1>
      {currentBenefits.length > 0 && (
        <ul className={`${css.benefits_list} ${isFadingOut ? css.fading_out : css.fading_in}`}>
          {currentBenefits.map(benefit => (
            <li key={benefit.title} className={css.benefit_item}>
              <div className={css.benefit_title}>
                <img src={svg_ok} className={css.ok_icon} alt="Check icon" />
                <h2 className={css.main}>{benefit.title}</h2>
              </div>
              <p className={css.describe}>{benefit.describe}</p>
            </li>
          ))}
        </ul>
      )}
    </section>
  );
}
